import{r as i,j as e}from"./index-yh7jtPQN.js";import{e as g}from"./index-CzIASJHn.js";import{C as k}from"./index-DGgZGZ4Y.js";import{a as y}from"./index-B9ygI19o.js";import"./iconBase-B40uof1y.js";const v="_icon_ng9r3_57",r={"dashboard-container":"_dashboard-container_ng9r3_1","show-tickets":"_show-tickets_ng9r3_21","ticket-filters":"_ticket-filters_ng9r3_37",icon:v},h={"ticket-container":"_ticket-container_1ra8h_1","ticket-footer":"_ticket-footer_1ra8h_23"},_=i.memo(({ticketId:o,createdAt:a,createdBy:n,email:c,phone:l,status:d})=>e.jsxs("div",{className:h["ticket-container"],children:[e.jsx("div",{className:h["ticket-header"],children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[" ",e.jsx("p",{style:{width:"30px",height:"30px",backgroundColor:d==="resolved"?"green":"orange",borderRadius:"50%"}}),e.jsx("span",{children:o})]}),e.jsxs("div",{children:["Date ",a.split("T")[1]]})]})}),e.jsxs("div",{className:h["ticket-footer"],children:[e.jsx("div",{children:n}),e.jsx("div",{children:l}),e.jsx("div",{children:c})]})]})),T=()=>{const[o,a]=i.useState("all"),[n,c]=i.useState([]),[l,d]=i.useState(!0),[p,x]=i.useState("");let m;const u=async()=>{try{const s=sessionStorage.getItem("token");await y.get("http://localhost:5000/api/ticket",{headers:{Authorization:`Bearer ${s}`}}).then(t=>{console.log(t.data.tickets),c(t.data.tickets)})}catch(s){console.error(s)}finally{d(!1)}},f=n.filter(s=>{const t=p.toLowerCase();return o!=="all"&&s.status!==o?!1:s.ticketId?.toLowerCase().includes(t)||s.name?.toLowerCase().includes(t)||s.email?.toLowerCase().includes(t)||s.phone?.toLowerCase().includes(t)}),j=s=>{const t=s.target.value;clearTimeout(m),m=setTimeout(()=>{x(t)},400)};return i.useEffect(()=>{u()},[]),e.jsxs("div",{className:r["dashboard-container"],children:[e.jsxs("p",{className:"flex",style:{alignItems:"center"},children:[e.jsxs("p",{className:"icon",style:{border:"1px solid #c7c5c5",cursor:"pointer",borderRight:"0",height:"100%",padding:"0.38rem",display:"inline-block",borderBottomLeftRadius:"8px",borderTopLeftRadius:"8px"},children:[e.jsx(k,{})," "]}),e.jsx("input",{type:"text",style:{border:"1px solid #c7c5c5",borderLeft:"0",margin:"1rem 0",width:"20vw",borderTopLeftRadius:"0",borderBottomLeftRadius:"0"},placeholder:"Search for ticket",onChange:j})]}),e.jsxs("ul",{className:r["ticket-filters"],children:[e.jsxs("li",{className:r.filter,style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"5px"},onClick:()=>a("all"),children:[e.jsx("span",{className:r.icon,children:e.jsx(g,{})}),e.jsx("span",{children:"All Tickets"})]}),e.jsxs("li",{className:r.filter,onClick:()=>a("resolved"),children:[" ",e.jsx("span",{children:"Resolved"})]}),e.jsxs("li",{className:r.filter,onClick:()=>a("unresolved"),children:[" ",e.jsx("span",{children:"Unresolved"})]})]}),e.jsx("div",{className:r["show-tickets"],children:l?e.jsx("p",{children:"Loading..."}):f.map(s=>e.jsx(_,{ticketId:s.ticketId,createdAt:s.createdAt,createdBy:s.name,email:s.email,phone:s.phone,status:s.status},s._id))})]})};export{T as default};
