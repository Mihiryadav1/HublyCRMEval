import{r as n,j as e,y as L}from"./index-yh7jtPQN.js";import{B as $}from"./index-C-kGUL9P.js";import{a as r}from"./index-B9ygI19o.js";const F="_avatar_1jy2s_51",R="_messages_1jy2s_105",T="_textBox_1jy2s_125",W="_sendBtn_1jy2s_171",o={"chatbot-container":"_chatbot-container_1jy2s_1","chat-header":"_chat-header_1jy2s_19","chatbot-name":"_chatbot-name_1jy2s_39",avatar:F,messages:R,textBox:T,sendBtn:W},H="_thankBtn_rau69_49",i={"configuration-cards":"_configuration-cards_rau69_1","input-group":"_input-group_rau69_23",thankBtn:H},O=n.memo(({theme:l})=>{const j=window.innerWidth<=600,{header:y,bgColor:v,firstMessage:f,secondMessage:k}=l,[c,d]=n.useState(""),[g,_]=n.useState(!1),[a,p]=n.useState({nameLabel:"",name:"",emailLabel:"",email:"",phoneLabel:"",phone:"",introduceHeading:""}),[w,B]=n.useState(null),[C,u]=n.useState([]),N=async t=>{t.preventDefault();try{await r.post("http://localhost:5000/api/ticket/createTicket",{name:a.name,email:a.email,phone:a.phone}).then(s=>{sessionStorage.setItem("ticketId",s.data.ticket._id),B(s.data.ticket._id),L("Thankyou! Our team wil get back to you!",{type:"success"})})}catch(s){console.log(s)}},S=async()=>{if(!g){u(t=>[...t,{text:c,sender:"user"}]),_(!0),d("");return}try{const t=sessionStorage.getItem("ticketId");await r.post(`http://localhost:5000/api/message/${t}`,{text:c}).then(s=>{d(""),m()})}catch(t){console.log(t)}},h=async t=>{const{name:s,value:x}=t.target;p(M=>({...M,[s]:x}))},m=async()=>{try{const t=sessionStorage.getItem("ticketId");t&&await r.get(`http://localhost:5000/api/message/${t}/`).then(s=>{u(s.data.messages)})}catch(t){console.log(t)}},I=async()=>{try{await r.get("http://localhost:5000/api/chatbot/").then(t=>{console.log(t.data.chatConfig.chatBotConfig,"form");const s=t.data.chatConfig.chatBotConfig;p(x=>({...x,emailLabel:s.emailLabel,nameLabel:s.nameLabel,phoneLabel:s.phoneLabel,introduceHeading:s.introduceHeading}))})}catch(t){console.log(t)}};return n.useEffect(()=>{sessionStorage.getItem("ticketId")&&m()},[]),n.useEffect(()=>{m(),I()},[]),e.jsxs("div",{className:o["chatbot-container"],style:{width:j?"100vw":"420px"},children:[e.jsx("div",{className:o["chat-header"],style:{backgroundColor:`${y}`},children:e.jsx("div",{className:"flex",style:{justifyContent:"space-between",width:"100%",alignItems:"center"},children:e.jsxs("div",{className:"flex",style:{alignItems:"center"},children:[e.jsxs("div",{className:o.avatar,children:[e.jsx("img",{src:"/hublychatbot.png",alt:""}),e.jsx("p",{})]}),e.jsx("div",{className:o["chatbot-name"],children:"Hubly"})]})})}),e.jsxs("div",{className:o.messages,style:{backgroundColor:`${v}`},children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{style:{alignItems:"center"},children:e.jsx("div",{className:o.avatar,children:e.jsx("img",{src:"/hublychatbot.png",alt:""})})}),e.jsxs("div",{style:{flex:1},children:[" ",e.jsx("div",{style:{boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",padding:"10px",borderRadius:"10px",marginBottom:"5px",backgroundColor:"white",maxWidth:"50%",wordBreak:"break-word"},children:f}),e.jsx("div",{style:{boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",padding:"10px",borderRadius:"10px",marginBottom:"5px",backgroundColor:"white",maxWidth:"50%",wordBreak:"break-word"},children:k})]})]}),e.jsxs("div",{action:"",style:{borderRadius:"10px",display:"inline-block",padding:"10px",marginTop:"10px"},children:[e.jsx("div",{className:"userMessages",children:C.map(t=>{const s=t.sender==="user";return e.jsx("div",{style:{display:"flex",justifyContent:s?"flex-end":"flex-start"},children:e.jsx("p",{style:{padding:"10px",boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",borderRadius:"10px",marginBottom:"5px",backgroundColor:"white",wordBreak:"break-word"},children:t.text})})})}),g&&!w&&e.jsx("div",{className:i["configuration-cards"],children:e.jsxs("form",{onSubmit:N,children:[e.jsx("h4",{children:a.introduceHeading}),e.jsxs("div",{className:i["input-group"],children:[e.jsx("label",{htmlFor:"name",children:a.nameLabel}),e.jsx("input",{type:"text",name:"name",placeholder:"Your name",value:a.name,onChange:h})]}),e.jsxs("div",{className:i["input-group"],children:[e.jsx("label",{htmlFor:"phone",children:a.phoneLabel}),e.jsx("input",{type:"text",name:"phone",placeholder:"+1 (000) 10 - 000",value:a.phone,onChange:h})]}),e.jsxs("div",{className:i["input-group"],children:[e.jsx("label",{htmlFor:"email",children:a.emailLabel}),e.jsx("input",{type:"email",name:"email",placeholder:"example@gmail.com",value:a.email,onChange:h})]}),e.jsxs("div",{style:{textAlign:"center"},children:["  ",e.jsx("button",{className:i.thankBtn,children:"Thank You"})]})]})})]})]}),e.jsxs("div",{className:o.textBox,children:[e.jsx("textarea",{name:"message",id:"",placeholder:"Write a message",value:c,onChange:t=>{d(t.target.value)}}),e.jsx("p",{className:o.sendBtn,onClick:S,children:e.jsx($,{})})]})]})}),A="_message_6etko_1",b={message:A},q=n.memo(({chatBoxTheme:l})=>e.jsx("div",{className:b.message,children:e.jsxs("div",{className:b.avatar,style:{textAlign:"center",position:"relative"},children:[e.jsx("img",{src:"/hublychatbot.png",alt:"",style:{position:"absolute",top:"-50%",left:"50%",transform:"translate(-50%,-100%)"}}),e.jsx("p",{style:{margin:"1rem",textAlign:"left"},children:l.welcomeMessage})]})}));export{O as C,q as W};
